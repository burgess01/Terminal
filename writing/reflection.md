# Command Shell

## Katie Burgess

## Program Output

### What is the output from running the following commands?

Use a fenced code block to provide the output for this command.
Make sure that the fenced code block designates the content as text.

- `python project/pylang/pyprompt.py < commands/test_six.cmd`

```text
pyprompt 0.1.0

>pwd
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01
>ls
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.mdlrc
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/config
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/README.md
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.gitignore
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.github
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/commands
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.git
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/writing
>cd
>pwd
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project
>ls
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project/pylang
>cd
>pwd
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project/pylang
>ls
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project/pylang/pyprompt.py
>cd
>pwd
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01
>ls
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.mdlrc
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/config
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/README.md
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.gitignore
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.github
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/commands
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.git
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/writing
>cd
project_wrong_name  is not valid
>ls
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.mdlrc
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/config
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/README.md
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.gitignore
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.github
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/commands
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.git
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/writing
>exit
```

Use a fenced code block to provide the output for this command.
Make sure that the fenced code block designates the content as text.

- `python project/pylang/pyprompt.py < commands/test_seven.cmd`

```text
pyprompt 0.1.0

>pwd
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01
>ls
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.mdlrc
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/config
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/README.md
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.gitignore
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.github
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/commands
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.git
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/writing
>cd
>pwd
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project
>ls
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project/pylang
>cd
>pwd
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project/pylang
>ls
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project/pylang/pyprompt.py
>cd
>pwd
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01
>ls
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.mdlrc
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/config
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/README.md
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.gitignore
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.github
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/commands
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.git
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/writing
>cd
project_wrong_name  is not valid
>ls
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.mdlrc
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/config
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/README.md
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/project
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.gitignore
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.github
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/commands
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/.git
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01/writing
>pwd
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01
>exit
```

### What happens when you give the `pyprompt` Python program an incorrect command? What is the output? What is the error code?

If you give pyprompt an incorrect command, the output is a print statement to the terminal saying that the command was not found. The error code is 1.

#### Output from running the Python program with an incorrect command

Provide an incorrect command interaction using a fenced code block
Provide the return code that is evident after you exit the `pyprompt`
Explain the command you typed to get the return code that is evident after you exit the `pyprompt`

```text
pyprompt 0.1.0

Command not found
```
The error code I got from running this is 1, as that is the error code I returned to the operating system. I got this by running the command 'echo $?' on my mac.

## Source Code and Configuration Files

### Describe in detail how the program's source code works

My code works though creating a different function for each separate command that my terminal supports, being pwd, cd, ls, and exit. Inside of each of these functions I have a return value of the return code, being either 0 or 1. I have all of my function code inside of try/except blocks, so that if any of the code errors it will automatically return the failed error code 1. In my main function, I check if the argument in index 1 is the < symbol. If it is, I know that the input is coming from standard input and handle it that way. If it is not, I know it is command line input and that I need to handle it through command line arguments. Inside of these two cases my logic is very similar. I check the first input against all of my possible functions, as that first input is supposed to be the command. If it matches any of my functions, I feed it into there and run it. If it doesn't match, it says the command is not found and exits the program.

#### Source code that determines what command the user input when running `pyprompt`

Provide the source code that completes the specified task
Write at least one paragraph to explain how this source code works
```python
    print("pyprompt 0.1.0\n")
    if len(sys.argv) == 1:
        # use fileinput/sys.stdin to take in input
        for line in fileinput.input():
            # use attrs to take input and feed into correct function
            lineArgs = line.split()
            # first line is command
            returnCode = 0
            if lineArgs[0] == "pwd":
                print(">pwd")
                returnCode = pwd()
            elif lineArgs[0] == "ls":
                print(">ls")
                returnCode = ls()
            elif lineArgs[0] == "cd":
                print(">cd")
                returnCode = cd(lineArgs[1])
            elif lineArgs[0] == "exit":
                print(">exit")
                exit(returnCode)
            else:
                print("Command not found")
                returnCode = 1
                exit(returnCode)
    else:
        # if in else this means it was ran in the command line
        if sys.argv[1] == "pwd":
            print(">pwd")
            returnCode = pwd()
        elif sys.argv[1] == "ls":
            print(">ls")
            returnCode = ls()
        elif sys.argv[1] == "cd":
            print(">cd")
            returnCode = cd(lineArgs[2])
        elif sys.argv[1] == "exit":
            print(">exit")
            exit(returnCode)
        else:
            print("Command not found")
            returnCode = 1
            exit(returnCode)
```

This code works by checking if the input is from command line interface or through standard input. If it is through standard input, it iterates through every command, running it and returning the output to the terminal. If anything does not run correctly, it will return a failed return code to the OS.

#### Source code that determines whether or not the destination of `cd` is a valid directory

Provide the source code that completes the specified task
Write at least one paragraph to explain how this source code works

```python
try:
        origDir = os.getcwd()
        os.chdir(navigation)
        return 0
    except:
        # if the directory is not real
        print(navigation, " is not valid")
        # return failing return code
        return 1
```
This code works using the functions that are in the built-in library os. os has getcwd() and chdir(), both being functions that are very useful for this function. The former is able to get the current working directory for the program and return it to the user. The latter is able to change the directory to the one specified by the user when it is inputted into the program. This also has an except block that is called when the program is unable to change the directory to the one specified, meaning that it did not exist and is invalid. In this case the function returns 1, meaning that it did not work. Otherwise, the program will return 0 meaning that it worked.

#### Source code that ensures that a `KeyboardInterrupt` does not crash the `pyprompt` program with a stack trace

Provide the source code that completes the specified task
Write at least one paragraph to explain how this source code works

```python
except KeyboardInterrupt:
        # make sure a Keyboard Interrupt does not crash code
        traceback.print_exc()
        returnCode = 1
        exit(returnCode)
```
This code works through the traceback built in library, which allows you to print a stack trace to the user if a keyboard interrupt is detected by the program. If this happens, it means the program failed, so the returnCode should be set to 1 and the program should be exited.

#### What happens when you press `CTRL-c` while running the `pyprompt` program?

use a fenced code block to show what output your program produces after you press CTRL-c

```text
pyprompt 0.1.0

>pwd
/Users/20burgessk/Documents/os/labs/computer-science-400-fall-2022-p3-command-shell-burgess01
^CTraceback (most recent call last):
  File "project/pylang/pyprompt.py", line 94, in main
    returnCode = pwd()
KeyboardInterrupt
```

### What are the similarities and differences between using the `pyprompt` interactively and through standard input/output redirection?

Provide a one-paragraph response that answers this question in your own words.

The differences are that they are run using different parts of the code, and that standard input runs multiple commands, while interactively runs one at a time. Both are able to use the same functions through the way I am parsing the data that is given to my program.

### How do the files inside of the `commands/` directory support the automated testing of the `pyprompt` program?

Provide a one-paragraph response that answers this question in your own words.

These files support automated testing by giving a standard file that you should be able to get the same, certain outputs with it. If you know what you are supposed to get from a certain input you should be able to predict what your correct output will be.

## Project Reflection

### How do the programs that you implemented connect to the content in the Process Execution course module?

The first two course modules were called "Systems Introduction" and "Process Execution"
Provide a one-paragraph response that answers this question in your own words.

These connect to the process execution module as it helps to illustrate the inner workings of the operating system. it illustrates how the fork and exec functions work without you having to use them.

### What was the greatest challenge that you faced when completing this project? How did you resolve it?

The greatest challenge I faced was starting. I did not understand what format the information was coming in as and how to handle that input, so I talked with the professor and looked up some built in functions that I could use in order to handle both standard input and command line input. I decided to use two different approaches depending on the situation, using different built in functions depending on the format.

### What features does your `pyprompt` program not provide that a shell like `zsh` or `bash` does provide?

Provide a one-paragraph response that answers this question in your own words.

My pyprompt program does not provide commands like mkdir, rm, and other commands that create directories, moves files, and removes files. I think that I will expand on this in the future, as it helps to give me a better understanding on how things like terminals work on my operating system.
